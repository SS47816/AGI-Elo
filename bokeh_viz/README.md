# Bokeh Visualization System for AGI-Elo

This directory contains tools for generating interactive visualizations of model and test case ratings using Bokeh. These visualizations provide insights into model performance and rating distributions across different AI tasks.

## Overview

The system generates two primary visualizations:

1. **Rating Distributions** - Shows the distribution of test case ratings and model ratings on the same plot
2. **Performance Prediction vs Reality** - Compares the theoretical expected performance with actual observed outcomes based on rating differences

## Prerequisites

- Python 3.10+
- Bokeh 3.7+
- NumPy
- Pandas
- Matplotlib
- scikit-learn
- tqdm

## Data Source

The visualizations rely on data in the `elo_results` directory, which contains model ratings, test case ratings, and match results. These results should be generated by running the evaluation on the master branch first.

## Directory Structure

```
AGI-Elo/
├── bokeh_viz/
│   ├── bokeh_visualizations.py       # Main visualization script
│   ├── run_bokeh_viz.sh              # Script to run visualizations for all tasks
│   └── elo_results/                  # Contains evaluation results (from master branch)
│       ├── action/
│       ├── language/
│       └── vision/
└── results_html/                     # Output directory for HTML visualizations
    ├── action/
    ├── language/
    └── vision/
```

## Running the Visualizations

### For all tasks

To generate visualizations for all six tasks:

```bash
cd bokeh_viz
./run_bokeh_viz.sh
```

This script will process each task and create visualizations in the appropriate directories under `results_html/`.

### For a specific task

To generate visualizations for a specific task:

```bash
python bokeh_visualizations.py \
    --test_case_ratings "path/to/rating_Glicko_test_case_1.pkl" \
    --model_ratings "path/to/rating_Glicko_model_1.pkl" \
    --match_results "path/to/matches" \
    --output_dir "path/to/output_directory"
```

## Tasks Covered

The visualization system covers six AI tasks across three domains:

1. **Vision**
   - Image Classification (ImageNet)
   - Object Detection (COCO)

2. **Language**
   - Question Answering (MMLU)
   - Code Generation (LiveCodeBench)

3. **Action**
   - Motion Prediction (Waymo)
   - Motion Planning (NAVSIM)

## Output Files

For each task, two HTML files are generated in the corresponding output directory:

- `ratings_visualization.html`: Interactive histogram of test case ratings with model ratings overlay
- `outcome_vs_rating.html`: Plot showing the relationship between rating differences and performance outcomes

These HTML files are included in index.html through iframe.
